CONST KEY_ESC = 4;

CONST FPS := 60;
CONST FRAME_TIME = 1 / FPS;

EXPORT MAIN()
BEGIN
  LOCAL running := true;
  LOCAL lastTick_ms := TICKS();

  WAIT(FRAME_TIME);

  WHILE running DO
    IF ISKEYDOWN(KEY_ESC) THEN
      running := false;
    END;

    LOCAL tickTime_ms := TICKS();
    LOCAL deltaTime_s := 0.001 * (tickTime_ms - lastTick_ms);
    lastTick_ms := tickTime_ms;

    if deltaTime_s < FRAME_TIME THEN
      WAIT(FRAME_TIME - deltaTime_s);
    END;

    RECT(RGB(0, 0, 0));
  END;
END;
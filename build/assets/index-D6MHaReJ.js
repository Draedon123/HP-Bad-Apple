(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function S(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function u(e){if(e.ep)return;e.ep=!0;const t=S(e);fetch(e.href,t)}})();const D=30,m=1/D,F=0,N=1,L=0,I=320,_=160,C=161,R=18.67;async function v(){const o=document.getElementById("loading");let c=0;const u=(await P("/HP-Bad-Apple/frames.txt",(s,n)=>{if(n===null)return;const p=n.byteLength/1024/1024;c+=p,o.textContent=`Loading... (${c.toFixed(2)}/${R}mb)`})).split(`
`),e=document.querySelector("audio"),t=document.getElementById("main"),i=t.getContext("2d");if(i===null)throw new Error("Could not get 2D Canvas Rendering Context");T(0,0,t.width,t.height,"black"),o.textContent="Click Space to start/pause (has audio). YouTube Demos below",o.style.color="white";let l=1,a=null;document.addEventListener("keydown",async s=>{s.code==="Space"&&(s.preventDefault(),o.remove(),a===null?await M():b())});let d=0;async function M(){l>=u.length&&(l=1),e.currentTime=(l-1)*m,await e.play(),d=performance.now()+m*1e3;function s(){if(l>u.length){clearTimeout(a),a=null;return}const n=performance.now()-d;n>m*1e3&&(e.currentTime=(l-1)*m,d=performance.now()),d+=m*1e3,x(l),l++,a=setTimeout(s,Math.max(0,m*1e3-n))}a=setTimeout(s,m*1e3)}function b(){e.pause(),clearTimeout(a),a=null}function x(s){const n=u[s-1],p=(n.length-1)/2,g=n.charCodeAt(0)-C,f=g===L?I:_;let r=0,h=0;for(let y=0;y<p;y++){const A=n.charCodeAt(y*2+1)-C;let w=n.charCodeAt(y*2+2)-C;if(A===F){r+=w,r>=f&&(h+=Math.floor(r/f),r%=f);continue}for(;w>0;){const E=Math.min(f-r,w),O=A===N?"black":"white";g===L?T(r,h,r+E-1,h,O):T(h,r,h,r+E-1,O),w-=E,r+=E,r==f&&(h++,r=0)}}}function T(s,n,p,g,f){i.fillStyle=f,i.fillRect(s,n,p-s+1,g-n+1)}}async function P(o,c){const u=(await fetch(o)).body?.getReader(),e=new TextDecoder;let t="";async function i(){const{done:l,value:a}=await u.read();if(l)return c("",null),t;const d=e.decode(a,{stream:!0});return c(d,a),t+=d,i()}return i()}v().catch(o=>{const c=o instanceof Error?o.message:JSON.stringify(o);throw alert(c),o});
